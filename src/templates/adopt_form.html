{% extends "base.html" %}

{% block title %}Adopt {{ pet.name }} - Take A Paw{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-10">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0">Adoption Application for {{ pet.name }}</h3>
                <p class="mb-0">Thank you for considering adopting {{ pet.name }}!</p>
            </div>
            
            <div class="card-body">
                <!-- Pet Summary -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <img src="{{ pet.image }}" alt="{{ pet.name }}" class="img-fluid rounded">
                    </div>
                    <div class="col-md-9">
                        <h4>{{ pet.name }}</h4>
                        <p><strong>Breed:</strong> {{ pet.breed }} | <strong>Age:</strong> {{ pet.age }} | <strong>Gender:</strong> {{ pet.gender }}</p>
                        <p class="text-muted">{{ pet.description }}</p>
                    </div>
                </div>

<!-- In the form tag, line ~27 -->
<form method="POST" action="{{ url_for('submit_adoption', pet_id=pet.id|urlencode) }}">                    <!-- Personal Information -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>Personal Information</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="full_name" class="form-label">Full Name *</label>
                                    <input type="text" class="form-control" id="full_name" name="full_name" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label">Email Address *</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="phone" class="form-label">Phone Number *</label>
                                    <input type="tel" class="form-control" id="phone" name="phone" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="address" class="form-label">Street Address *</label>
                                    <input type="text" class="form-control" id="address" name="address" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label for="city" class="form-label">City *</label>
                                    <input type="text" class="form-control" id="city" name="city" required>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="state" class="form-label">State *</label>
                                    <input type="text" class="form-control" id="state" name="state" required>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label for="zip_code" class="form-label">ZIP Code *</label>
                                    <input type="text" class="form-control" id="zip_code" name="zip_code" required>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Housing Information -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>Housing & Living Situation</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="housing_type" class="form-label">Type of Residence *</label>
                                    <select class="form-select" id="housing_type" name="housing_type" required>
                                        <option value="">Select...</option>
                                        <option value="house">House</option>
                                        <option value="apartment">Apartment</option>
                                        <option value="condo">Condo</option>
                                        <option value="townhouse">Townhouse</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="has_yard" class="form-label">Do you have a yard? *</label>
                                    <select class="form-select" id="has_yard" name="has_yard" required>
                                        <option value="">Select...</option>
                                        <option value="yes">Yes, fully fenced</option>
                                        <option value="partial">Yes, partially fenced</option>
                                        <option value="no">No yard</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="has_other_pets" class="form-label">Do you have other pets? *</label>
                                    <select class="form-select" id="has_other_pets" name="has_other_pets" required onchange="toggleOtherPets()">
                                        <option value="">Select...</option>
                                        <option value="yes">Yes</option>
                                        <option value="no">No</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="experience_with_pets" class="form-label">Experience with pets *</label>
                                    <select class="form-select" id="experience_with_pets" name="experience_with_pets" required>
                                        <option value="">Select...</option>
                                        <option value="first_time">First-time pet owner</option>
                                        <option value="some_experience">Some experience</option>
                                        <option value="experienced">Very experienced</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3" id="otherPetsSection" style="display: none;">
                                <label for="other_pets_details" class="form-label">Please describe your other pets:</label>
                                <textarea class="form-control" id="other_pets_details" name="other_pets_details" rows="3" placeholder="Species, breeds, ages, temperaments..."></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Pet Care Information -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>Pet Care & Lifestyle</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="hours_alone" class="form-label">How many hours will the pet be alone daily? *</label>
                                    <select class="form-select" id="hours_alone" name="hours_alone" required>
                                        <option value="">Select...</option>
                                        <option value="0-4">0-4 hours</option>
                                        <option value="4-8">4-8 hours</option>
                                        <option value="8+">More than 8 hours</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="vet_reference" class="form-label">Veterinarian Reference</label>
                                    <input type="text" class="form-control" id="vet_reference" name="vet_reference" placeholder="Clinic name and phone number">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="adoption_reason" class="form-label">Why do you want to adopt {{ pet.name }}? *</label>
                                <textarea class="form-control" id="adoption_reason" name="adoption_reason" rows="4" required placeholder="Please tell us about your lifestyle and why you think {{ pet.name }} would be a good fit for your family..."></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Agreement -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5>Adoption Agreement</h5>
                        </div>
                        <div class="card-body">
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="agree_terms" required>
                                <label class="form-check-label" for="agree_terms">
                                    I understand that completing this application does not guarantee adoption and that all applications are subject to approval.
                                </label>
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="agree_care" required>
                                <label class="form-check-label" for="agree_care">
                                    I agree to provide proper care, nutrition, and veterinary treatment for this pet.
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="agree_lifetime" required>
                                <label class="form-check-label" for="agree_lifetime">
                                    I understand that adopting a pet is a lifetime commitment.
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="text-center">
                        <button type="submit" class="btn btn-success btn-lg">Submit Adoption Application</button>
                        <a href="{{ url_for('pet_detail', pet_id=pet.id) }}" class="btn btn-secondary btn-lg">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
function toggleOtherPets() {
    const hasOtherPets = document.getElementById('has_other_pets').value;
    const otherPetsSection = document.getElementById('otherPetsSection');
    otherPetsSection.style.display = hasOtherPets === 'yes' ? 'block' : 'none';
}
</script>
{% endblock %}